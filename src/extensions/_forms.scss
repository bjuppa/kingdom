// Opinionated form styles
$primary-color: blue !default;
$destructive-color: red !default;

$input-border-color: rgba(black, .25) !default;
$input-border-width: 1px !default;
$input-border-radius: $spacing-base/8 !default;
$input-border-style: solid !default;
$input-background: white !default;
$input-box-shadow: inset 0 2px 4px 0 rgba(black, .08) !default;
$input-focus-box-shadow: 0 0 0 .2rem lighten($primary-color, 25%);

$button-color: $primary-color !default;
$button-text-color: lighten($button-color, 90%) !default;
$button-destructive-color: $destructive-color !default;
$button-destructive-text-color: lighten($button-destructive-color, 90%);
$button-border-color: $button-color !default;
$button-border-width: $input-border-width !default;
$button-border-radius: $input-border-radius !default;
$button-border-style: $input-border-style !default;
$button-background: transparent !default;
$button-focus-outline: none !default;
$button-focus-box-shadow: set_nth($input-focus-box-shadow, -1, lighten($button-color, 30%)) !default;
$button-destructive-focus-box-shadow: set_nth($button-focus-box-shadow, -1, lighten($button-destructive-color, 30%)) !default;
$button-horizontal-padding: $spacing-base/8 !default;
$button-text-decoration: none !default;

input, select:not([size]):not([multiple]) {
  @include set-border-preserving-line-height($spacing-base, $input-border-width);
}

textarea {
  @include set-border-for-auto-height($width: $input-border-width);
}

input, textarea, select {
  background: $input-background;

  border-color: $input-border-color;
  border-style: $input-border-style;
  border-radius: $input-border-radius;
}

input, textarea {
  box-shadow: $input-box-shadow;
}

select {

}

input:not([type='checkbox']):not([type='radio']) {

}

[type='checkbox'],
[type='radio'] {
  vertical-align: baseline;
  height: auto;

  // Attempt to align better with text
  position: relative;
  bottom: 1px;
}

%button {
  background: $button-background;
  color: $button-color;

  @include set-border-preserving-line-height($spacing-base, $button-border-width);
  border-color: $button-border-color;
  border-style: $button-border-style;
  border-radius: $button-border-radius;

  padding-left: $button-horizontal-padding;
  padding-right: $button-horizontal-padding;

  text-decoration: $button-text-decoration;

  // Buttons go on their own line and have top margin
  display: block;
  @extend %mt-1;

  &:active {
    color: $button-color; //Avoid clicked button "disappearing" when browser inverts text color on a transparent background
    //TODO: Visualise button activation
  }

  &:focus {
    outline: $button-focus-outline;
    box-shadow: $button-focus-box-shadow;
  }

}

button,
[type='button'],
[type='reset'],
[type='submit'] {
  @extend %button;
}

//Prominent button
.button-prime {
  @extend %button;
  background: $button-color;
  border-color: $button-color;
  color: $button-text-color;

  &:active {
    color: $button-text-color;
  }
}

//Standard button
.button-plain {
  @extend %button;
}

//Discreet, link like button
.button-petty {
  @extend %button;
  border: transparent;
  background: transparent;
  text-decoration: underline;

  &:focus {
    text-decoration: none;
  }
}

//Cautionary button
.button-destructive {
  @extend %button;
  color: $button-destructive-color;
  border-color: $button-destructive-color;

  &:active {
    color: $button-destructive-color;
  }

  &:focus {
    box-shadow: $button-destructive-focus-box-shadow;
  }

  &.button-prime {
    background: $button-destructive-color;
    border-color: $button-destructive-color;
    color: $button-destructive-text-color;

    &:active {
      color: $button-destructive-text-color;
    }
  }
}

.button-large {
  @extend %button;
  @include set-text(1em, 2*$spacing-base);
  @include set-border-preserving-line-height($spacing-base * 2, $button-border-width);
}

input::placeholder, textarea::placeholder {
  color: inherit;
  opacity: .5;
}

label {
  // Labels go on their own line before their inputs
  display: block;
}

//TODO: remove default inlining of single input button
label:only-of-type ~ * {
  /* Elements containing just one label have the rest of their contents inline */
  display: inline-block;
  @extend %mt-0;
}

form.form-inline {
  /* Make form contents go inline */
  * {
    display: inline-block;
  }
}
